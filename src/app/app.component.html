<div class="header-container">
  <header>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white">
      <div class="header-div">
        <mat-label>
          <h3>EComm Demo</h3>
        </mat-label>
        <div>
          <button mat-raised-button class="cart-button">
            <mat-icon>shopping_cart</mat-icon>
            <ng-container *ngIf="localData.length === 0">My Cart</ng-container>
            <ng-container *ngIf="localData.length > 0">
              {{totalItems}} items <br>
              {{totalPrice | currency:'INR'}}
            </ng-container>
          </button>
        </div>
      </div>
    </nav>
    <!-- Navbar -->
  </header>
</div>
<div class="main-container">
  <div class="row mt-6 toggle-div">
    <mat-button-toggle-group (valueChange)="onViewChange($event)" [value]="viewType">
      <mat-button-toggle value="table" aria-label="Text align left">
        <mat-icon color="primary" [ngClass]="viewType === 'table' ? 'active-toggle-button' : ''">grid_on</mat-icon>
      </mat-button-toggle>
      <mat-button-toggle value="cards" aria-label="Text align center">
        <mat-icon color="primary" [ngClass]="viewType === 'cards' ? 'active-toggle-button' : ''">view_module
        </mat-icon>
      </mat-button-toggle>
    </mat-button-toggle-group>
    <button mat-raised-button color="primary" (click)="compareView = true">Compare</button>
  </div>
  <ng-container *ngIf="viewType === 'cards'">
    <div class="row product-list">
      <div class="main-product-column col-lg-3 col-md-4 col-sm-6" *ngFor="let item of productList">
        <div class="product-container">
          <div class="image-container">
            <img [src]="item.imageUrl" onerror="this.onerror=null; this.src='https://dummyimage.com/300/09f/fff.png'"
                 alt="product image">
          </div>
          <div >
            <mat-label>
              <h5>{{item.name}}</h5>
              <p class="price">{{item.price | currency: 'INR'}}</p>
              <p class="description" data-toggle="tooltip" data-placement="top" [title]="item.features.join(', ')">{{item.features[0] + ', ' + item.features[1]}}...</p>
            </mat-label>
          </div>
          <div class="update-quantity">
            <button mat-raised-button *ngIf="checkQuantity(item) === 0" class="add-to-cart-button"
                    (click)="updateQuantity(item, 'addToCart')">Add to cart
            </button>
            <div class="update-quantity-buttons" *ngIf="checkQuantity(item) > 0">
              <mat-icon (click)="updateQuantity(item, 'remove')">remove</mat-icon>
              <button mat-button>{{checkQuantity(item)}}</button>
              <mat-icon (click)="updateQuantity(item, 'add')">add</mat-icon>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="viewType === 'table'">
    <div class="table-container mobile-table-scroll md table-view">
      <table mat-table [dataSource]="productList" class="cu-table">

        <ng-container matColumnDef="image">
          <th mat-header-cell *matHeaderCellDef>Image</th>
          <td mat-cell *matCellDef="let row">
            <div class="image-container">
              <img [src]="row.imageUrl" onerror="this.onerror=null; this.src='https://dummyimage.com/300/09f/fff.png'"
                   alt="product image">
            </div>
          </td>
        </ng-container>

        <!-- Title Column -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef>Title</th>
          <td mat-cell *matCellDef="let row">
            <div>
              <div>{{row.name}}</div>
            </div>
          </td>
        </ng-container>

        <!-- description Column -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Description</th>
          <td mat-cell *matCellDef="let row">
            <div>
              <div>
                <p *ngFor="let f of row.features">{{f}}</p>
              </div>
            </div>
          </td>
        </ng-container>

        <!-- Price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>Price</th>
          <td mat-cell *matCellDef="let row">
            <div>
              <div>{{row.price}}</div>
            </div>
          </td>
        </ng-container>

        <!-- addToCartButtons Column -->
        <ng-container matColumnDef="addToCartButtons">
          <th mat-header-cell *matHeaderCellDef>Add / Update Quantity</th>
          <td mat-cell *matCellDef="let row">
            <div class="update-quantity">
              <button mat-raised-button *ngIf="checkQuantity(row) === 0" class="add-to-cart-button"
                      (click)="updateQuantity(row, 'addToCart')">Add to cart
              </button>
              <div class="update-quantity-buttons" *ngIf="checkQuantity(row) > 0">
                <mat-icon (click)="updateQuantity(row, 'remove')">remove</mat-icon>
                <button mat-button>{{checkQuantity(row)}}</button>
                <mat-icon (click)="updateQuantity(row, 'add')">add</mat-icon>
              </div>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

  </ng-container>
</div>
<div style="margin-bottom: 10rem"></div>
<router-outlet></router-outlet>
